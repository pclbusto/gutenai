# Repository Guidelines
## Project Structure & Module Organization
La raíz expone `main.py`, punto de entrada que inicializa la app GTK4/Adwaita. La lógica de dominio vive en `core/guten_core.py`, encargado de gestionar proyectos EPUB y el árbol OPF. La capa de interfaz reside en `gtk_ui/`, dividida en submódulos como `main_window.py`, `sidebar_left.py`, `central_editor.py` y gestores auxiliares (`actions.py`, `dialogs.py`). Utilidades compartidas viven en `utils/` y activos de ejemplo en `data/` y `libros/`. Los tests unitarios deben convivir en `tests/`, replicando la estructura de los módulos que ejercitan.
## Build, Test, and Development Commands
Trabaja dentro de un entorno virtual (`python -m venv .venv && source .venv/bin/activate`) y reinstala dependencias con `pip install -r requirements.txt`. Lanza la app con `python main.py`; si usas el entorno sugerido, `./run_gutenai.sh` delega en `.venv/bin/python`. Durante la integración de iconos ejecuta `python setup.py` para copiar assets en el tema de escritorio. Ejecuta pruebas con `python -m unittest discover tests` y, cuando debas aislar componentes, invoca módulos concretos (`python -m gtk_ui.central_editor` o `python -m core.guten_core`).
## Coding Style & Naming Conventions
Adhiere a PEP 8: sangría de cuatro espacios, módulos en `snake_case` y clases en `CamelCase`. Usa type hints y docstrings descriptivos como se ve en `core/guten_core.py`, manteniendo cadenas y comentarios en español para uniformidad. Evita lógica de UI en el core y viceversa; coloca helpers compartidos en `utils/`. Si aplicas un formateador automático (p.ej. `black --line-length 100`), confírmalo antes de commitear.
## Testing Guidelines
Los tests se estructuran con `unittest`. Nombra los archivos como `test_<modulo>.py` y hereda de `unittest.TestCase` con métodos `test_*`. Cubre rutas críticas de `GutenCore` (creación de proyectos, manipulación del manifest) y añade dobles de prueba para operaciones de disco. Documenta casos relevantes en comentarios breves y ejecuta todo el paquete con `python -m unittest` antes de abrir un PR.
## Commit & Pull Request Guidelines
Sigue mensajes concisos en español en presente (`Añade soporte para ...`); empieza por un verbo y evita descripciones genéricas. Para cada PR, incluye: propósito, módulos tocados, pasos para validar (`python main.py`, `python -m unittest`), y captura o GIF si hay cambios visuales. Vincula issues cuando existan y mantén los diffs enfocados: UI, core y utilidades deben quedar en commits separados cuando sea posible.
## UI Assets & Packaging
Los iconos fuente viven en la raíz (`gutenai.png`, `gutenai.svg`). Si los actualizas, vuelve a ejecutar `python setup.py` y verifica que `gtk4-update-icon-cache` se ejecute sin errores. Evita commitear binarios generados; solo incluye las fuentes originales y documenta dependencias externas adicionales dentro de `requirements.txt`.
